{# 产品库存 #}

{% set goodLimit = {
	activity_number :item.activity_number|default(0),
	activity_volume_number:item.activity_volume_number|default(0),
	activity_left_persent :((goodLimit.activity_number - goodLimit.activity_number)*100)/(goodLimit.activity_number|default(1)),
}%}

<div class="gs-goods-limit">

			<%#
				var activity_number = parseInt(item.activity_number);
				var left_persent = (item.activity_left_number/item.activity_number)*100;
				var langLeft = "{{get_component_trans(lang,'left')}}";
				var itemKillLeft = item.activity_left_number;
				var langKillLeftValue = langLeft.replace('XX','<b>'+item.activity_left_number+'</b>');
				var volume_persent = item.activity_volume_number/item.activity_number;

				if(activity_number && volume_persent > 0.9){ %>
				<span class="goods-limit-tips_left">
					<% langKillLeftValue %>
				</span>
				<span class="process-bar">
					<em class="process-inner"
						style="{% if pageData.buyBgC %}background-color:{{pageData.buyBgC}};{% endif %}
						width:<% left_persent %>%;
						"></em>
				</span>

				<%# } else if(activity_number && volume_persent <= 0.9) { %>
				<span class="goods-limit-tips_left">
					<b style="{% if pageData.buyBgC %}color:{{pageData.buyBgC}};{% endif %}">
						<% item.activity_volume_number %>
					</b>{{get_component_trans(lang,'sold')}}
				</span>
				<span class="process-bar">
					<em class="process-inner"
						style="{% if pageData.buyBgC %}background-color:{{pageData.buyBgC}};{% endif %}
						width:<% left_persent %>%;
						"></em>
				</span>
				<%# }%>

</div>
<style>
	[data-id="{{ pageInstanceId }}"] .gs-goods-limit .goods-limit-tips_left {
    position: absolute;
    left: 0;
    top: -22px;
    font: normal 12px/25px Arial;
    text-align: center;
  }

  [data-id="{{ pageInstanceId }}"] .gs-goods-limit .goods-limit-tips_left b {
    color: #ff8a00;
    padding-right: 5px;
  }

  [data-id="{{ pageInstanceId }}"] .gs-goods-limit .goods-limit-tips_left em {
    position: absolute;
    display: block;
    bottom: -10px;
    left: 10px;
    border-width: 5px;
    border-style: solid;
  }

  [data-id="{{ pageInstanceId }}"] .gs-goods-limit .goods-limit-tips_left em.tri_bd {
    border-color: #ddd transparent transparent;
    bottom: -11px;
    z-index: 1;
  }

  [data-id="{{ pageInstanceId }}"] .gs-goods-limit .goods-limit-tips_left em.tri_bg {
    border-color: #fff transparent transparent;
    z-index: 2;
  }
</style>
