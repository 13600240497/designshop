"use strict";var _createClass=function(){function s(t,o){for(var e=0;e<o.length;e++){var s=o[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,o,e){return o&&s(t.prototype,o),e&&s(t,e),t}}();function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}$(function(){var t=$(".geshop-U000203-default input[name=editEnv]").val();if($(".geshop-U000203-default").each(function(t){var o=$(this);o.find(".goods-list").eq(0).show(),o.find(".nav-list li").eq(0).addClass("active"),o.find(".nav-list li").on("click",function(){var t=$(this).index();$(this).siblings().removeClass("active"),$(this).addClass("active"),o.find(".goods-list").hide(),o.find(".goods-list").eq(t).show(),$.fn.lazyload?o.find("img.js-lazy").lazyload({skip_invisible:!0}):window.GS_GOODS_LAZY_FN(".js-lazy")})}),$(".geshop-U000203-default .goods-list .goods-item").each(function(){$(this).find(".geshop-goods-img").hasClass("soldout-bg")&&($(this).find(".shop-now-container").show(),$(this).find(".shop-now-text").text(""))}),1==t)$("img.js-lazy").each(function(){$(this).attr("src",$(this).attr("data-original"))});else{var o=GLOBAL.util.getPlatform();$.fn.lazyload?$(".geshop-U000203-default img.js-lazy").lazyload({skip_invisible:!0}):window.GS_GOODS_LAZY_FN(".js-lazy"),$(".geshop-U000203-default .goods-list .goods-items").each(function(){$(this).find(".geshop-goods-promotions .promotions-text").each(function(){1<$(this).data("promotions-length")&&(2===o?$(this).append(" ···"):$(this).append('<img src="https://geshoptest.s3.amazonaws.com/uploads/WaiETHlZ8ShDeFRXMB97Yjc3uQ4InAJr.png">'))})})}$(document).on("mouseenter",".geshop-U000203-default .geshop-goods-img",function(){2!==o||$(this).hasClass("soldout-bg")||$(this).find(".shop-now-container").show()}).on("mouseleave",".geshop-U000203-default .geshop-goods-img",function(){2!==o||$(this).hasClass("soldout-bg")||$(this).find(".shop-now-container").hide()}).on("mouseenter",".geshop-U000203-default .geshop-goods-promotions",function(){var t=GLOBAL.util.getPlatform(),o=$(this).has(".promotions-text").length,e=$(this).find(".promotions-text").data("promotions-length");2===t&&0<o&&1<e&&$(this).next(".geshop-goods-promotions-more").removeClass("none")}).on("mouseleave",".geshop-U000203-default .geshop-goods-promotions",function(){2===GLOBAL.util.getPlatform()&&$(this).next(".geshop-goods-promotions-more").addClass("none")}).on("click",".geshop-U000203-default .geshop-goods-promotions",function(){var t=GLOBAL.util.getPlatform(),o=$(this).next(".geshop-goods-promotions-more");if(2!==t&&1==$(this).data("flag")){$(this).parent();$(this).find("img").hasClass("up")?$(this).find("img").removeClass("up"):$(this).find("img").addClass("up"),o.is(".none")?o.removeClass("none"):o.addClass("none")}});var g=function(){function o(t){_classCallCheck(this,o),this._page=t.page?parseInt(t.page):1,this._pageSize=parseInt(t.pageSize),this._totalCount=parseInt(t.totalCount),this._pageCount=Math.ceil(t.totalCount/t.pageSize)}return _createClass(o,[{key:"page",get:function(){return this._page},set:function(t){return this._page=parseInt(t)}},{key:"pageSize",get:function(){return this._pageSize}},{key:"totalCount",get:function(){return this._totalCount}},{key:"pageCount",get:function(){return this._pageCount}}]),o}();function p(t,o){var e=o.page*o.pageSize,s=e<o.totalCount?$(".goods-list-ul li:eq("+e+")",$(t)).prevAll():$(".goods-list-ul li",$(t));0<s.length&&($(".goods-list-ul li",$(t)).removeClass("page-visible"),s.addClass("page-visible")),$.fn.lazyload?$(t).find("img.js-lazy").lazyload({skip_invisible:!0}):window.GS_GOODS_LAZY_FN(".js-lazy")}$(".geshop-U000203-default").each(function(t){var n=$(this),i=n.find("input[name=view_more_text]").val(),a=n.find("input[name=view_less_text]").val(),l=parseInt($(this).find("input[name=page_show_goods_number]").val());n.find(".goods-list").each(function(t,o){var e=$(o).attr("data-len"),s=new g({totalCount:e,pageSize:l});$(o).attr("data-pageCount",s.pageCount),p(o,s),$(o).find(".view_more_btn").off("click").on("click",function(){s.page;var t=s.page+1;if(t<=s.pageCount&&(1===t?(s.page=t,p(o,s),$(o).find(".view_more_btn span").text(i),$(window).scrollTop(n.offset().top)):(s.page=t,p(o,s),s.page===s.pageCount&&$(o).find(".view_more_btn span").text(a))),t===s.pageCount)return s.page=0,!1})})})});