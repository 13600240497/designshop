"use strict";var _createClass=function(){function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}$(function(){var n=(_createClass(u,[{key:"setIndex",value:function(t){this.heads.eq(t).addClass(this.activeClass).siblings().removeClass(this.activeClass),this.contents.eq(t).show().siblings().hide(),this.onTabChnage&&this.onTabChnage(t)}},{key:"_initEvents",value:function(){var n=this;this.heads.on("click",function(t){var e=$(t).index();n.set_index(e)})}}]),u);function u(t){var e=t.heads,n=void 0===e?[]:e,s=t.contents,i=void 0===s?[]:s,o=t.activeClass,a=void 0===o?"active":o,h=t.onTabChnage,l=void 0===h?null:h;_classCallCheck(this,u),this.index=0,this.heads=n,this.contents=i,this.activeClass=a,this.onTabChnage=l,this.setIndex(0),this._initEvents()}var l=(_createClass(e,[{key:"_init",value:function(){this.handlePageChange(),this.initEvents(),this.onInit()}},{key:"onInit",value:function(){this._onInit&&this._onInit(this.fullData)}},{key:"handlePageChange",value:function(){var t=this._page+1;t<this._pageCount&&(this._page=t,this.update_button_text(this.view_more_text)),t==this._pageCount&&(this._page=t,this.update_button_text(this.view_less_text)),t>this._pageCount&&(this._page=1,this.update_button_text(this.view_more_text)),this._onPageChange&&this._onPageChange(this.fullData)}},{key:"initEvents",value:function(){var t=this;this._button.off("click").on("click",function(){return t.handlePageChange()})}},{key:"update_button_text",value:function(t){this._button.text(t)}},{key:"fullData",get:function(){return{page:this._page,pageSize:this._pageSize,pageCount:this._pageCount}}}]),e);function e(t){_classCallCheck(this,e),this._page=t.page?parseInt(t.page):0,this._pageSize=parseInt(t.pageSize),this._totalCount=parseInt(t.totalCount),this._pageCount=Math.ceil(t.totalCount/t.pageSize),this._button=t.button||null,this._onInit=t.onInit||null,this._onPageChange=t.onPageChange||null,this.view_less_text=t.view_less_text,this.view_more_text=t.view_more_text,this._init()}function g(t){$.fn.lazyload?t.find("img.js-lazy").lazyload({skip_invisible:!0}):window.GS_GOODS_LAZY_FN(".js-lazy")}$(".geshop-U000203-default").each(function(t){var e=$(this);new n({heads:e.find(".nav-list li"),contents:e.find(".goods-list"),onTabChnage:function(){g(e)}});var o=e.find("input[name=view_more_text]").val(),a=e.find("input[name=view_less_text]").val(),h=parseInt($(this).find("input[name=page_show_goods_number]").val());e.find(".goods-list").each(function(t,e){var n=$(e).attr("data-len"),s=$(e).find(".goods-list-ul li"),i=$(e).find(".view_more_btn");new l({totalCount:n,pageSize:h,view_more_text:o,view_less_text:a,contents:s,button:i,onInit:function(t){$(e).attr("data-pageCount",t.pageCount)},onPageChange:function(t){var n=t.page*t.pageSize;s.each(function(t,e){t<n?$(e).addClass("page-visible"):$(e).removeClass("page-visible")}),g($(e))}})})});var t=GLOBAL.util.getPlatform();$(".geshop-U000203-default .goods-list .goods-items").each(function(){$(this).find(".geshop-goods-promotions .promotions-text").each(function(){1<$(this).data("promotions-length")&&(2===t?$(this).append(" ···"):$(this).append('<img src="https://geshoptest.s3.amazonaws.com/uploads/WaiETHlZ8ShDeFRXMB97Yjc3uQ4InAJr.png">'))})}),$(document).on("mouseenter",".geshop-U000203-default .geshop-goods-img",function(){2!==t||$(this).hasClass("soldout-bg")||$(this).find(".shop-now-container").show()}).on("mouseleave",".geshop-U000203-default .geshop-goods-img",function(){2!==t||$(this).hasClass("soldout-bg")||$(this).find(".shop-now-container").hide()}).on("mouseenter",".geshop-U000203-default .geshop-goods-promotions",function(){var t=GLOBAL.util.getPlatform(),e=$(this).has(".promotions-text").length,n=$(this).find(".promotions-text").data("promotions-length");2===t&&0<e&&1<n&&$(this).next(".geshop-goods-promotions-more").removeClass("none")}).on("mouseleave",".geshop-U000203-default .geshop-goods-promotions",function(){2===GLOBAL.util.getPlatform()&&$(this).next(".geshop-goods-promotions-more").addClass("none")}).on("click",".geshop-U000203-default .geshop-goods-promotions",function(){var t=GLOBAL.util.getPlatform(),e=$(this).next(".geshop-goods-promotions-more");if(2!==t&&1==$(this).data("flag")){$(this).parent();$(this).find("img").hasClass("up")?$(this).find("img").removeClass("up"):$(this).find("img").addClass("up"),e.is(".none")?e.removeClass("none"):e.addClass("none")}})});