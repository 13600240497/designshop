"use strict";var _createClass=function(){function n(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}}();function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}$(function(){var e=(_createClass(a,[{key:"init",value:function(){var t=this,a=GESHOP_STATIC;loadCss(a+"/resources/javascripts/library/swiper/swiper.min.css"),$LAB.script(a+"/resources/javascripts/library/gs_laytpl.js").wait(function(){gs_laytpl.config({open:"<%",close:"%>"}),t.scrollCalBackFn(),t.getSameList(t.goodList),t.bindEvent()})}},{key:"getSameList",value:function(t){var e=this,n=this.$box.find(".u000041-modal5-goods-temp").html(),i=this.$box.find(".u000041-modal5-goods-list"),a="undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en";if(void 0!==t&&""!=t){var s=t.split(",");e.pageCount=Math.ceil(s.length/e.pageSize),t=s.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize);var o={lang:a,client:GESHOP_PLATFORM||"pc",goodsSn:t.join(",")},r=GESHOP_INTERFACE.goods_samelist.url;window.GEShopCommonFn_Vue.$jsonp(r,o,{target:this.$box}).done(function(t){var a=t.data;e.ajx=!0,gs_laytpl(n).render(a,function(t){var a=$($.parseHTML(t,document,!0));1===e.currentPage?i.html("").append(a):i.append(a),1==window.GESHOP_PAGE_TYPE?$("img.js_gbexp_lazy").each(function(){$(this).attr("src",$(this).attr("data-original"))}):"undefined"!=typeof GS_GOODS_LAZY_FN&&GS_GOODS_LAZY_FN(a.find("img.js_gbexp_lazy")),window.GS_GOODS_LAZY_FN(),window.GLOBAL&&window.GLOBAL.currency&&window.GLOBAL.currency.change_html()})})}}},{key:"bindEvent",value:function(){var e=this;this.$box.on("mouseenter",".same-items",function(){$(this).addClass("on").siblings().removeClass("on");var t=$(this).parents(".mo5-good-list");t.find(".geshop-u000041-modal5-list-title a").text($(this).attr("data-title")).attr("href",$(this).attr("data-url")),t.find(".geshop-u000041-modal5-list-img a").attr("href",$(this).attr("data-url")),t.find(".js-geshopImg-lazyload").attr("src",$(this).attr("data-img")),t.find(".mol5_quick_shop").attr("data-qkurl",$(this).attr("data-qkurl"));var a=window.GESHOP_LANGUAGES.left&&window.GESHOP_LANGUAGES.left.replace("XX",$(this).attr("data-gsnumber"));t.find(".geshop__mask--stocktip p").text(a)}),this.$box.on("click",".mol5_quick_shop",function(){GEShopSiteCommon.dialog.iframe($(this).attr("data-qkurl"),1080,597,!0)}),this.$box.on("click",".sub-item",function(){if(e.$box.hasClass("js_nav_fixed")){e.ajx=!1;var t=e.$box.find(".geshop-containr").offset().top;$("html,body").animate({scrollTop:t},500,function(){e.ajx=!0})}e.$box.find(".nav-item").removeClass("on"),e.$box.find(".sub-item").removeClass("on"),$(this).parents(".nav-item").addClass("on"),e.$box.find(".pagenation_nav .nav_1").text($(this).parents(".nav-item").find("span").eq(0).text()),e.$box.find(".pagenation_nav .nav_2").text($(this).find("span").text()),$(this).addClass("on");var a=$(this).attr("data-goodsSn");e.currentPage=1,e.getSameList(a)})}},{key:"scrollCalBackFn",value:function(){var e=this;$(window).on("scroll",function(){var t=$(this).scrollTop(),a=e.$box.find(".geshop-containr").offset();e.$box.hasClass("js_nav_fixed")&&(a.top<=t&&t<a.top+e.$box.find(".geshop-containr").height()?($("#js_nav").hide(),$(".js-geshop-nav").length&&$(".js-geshop-nav").hide(),$('div[data-key="U000027"]').length&&$('div[data-key="U000027"]').find("ul").hide(),e.$box.addClass("js-geshop-nav-fixed"),e.$box.find(".nav-hd-wrap,.nav-hd-fixd-wrap").addClass("fixed")):(e.$box.find(".nav-hd-wrap,.nav-hd-fixd-wrap").removeClass("fixed"),$("#js_nav").show(),e.$box.removeClass("js-geshop-nav-fixed"),$(".js-geshop-nav").length&&$(".js-geshop-nav").show(),$('div[data-key="U000027"]').length&&$('div[data-key="U000027"]').find("ul").show(),GEShopSiteCommon&&GEShopSiteCommon.jsNavFixed())),t>a.top+e.$box.find(".geshop-containr").height()/3&&e.pageCount>e.currentPage&&e.ajx&&(e.ajx=!1,e.currentPage++,e.getSameList(e.goodList))})}}]),a);function a(t){_classCallCheck(this,a),this.$box=t,this.ajx=!1,this.pageSize=140,this.pageCount=0,this.currentPage=1,this.goodList=this.$box.find(".nav-item").eq(0).attr("data-initSn"),this.init()}$(".geshop-U000041-modal5").each(function(t,a){new e($(a))})});