"use strict";$(function(){function b(e,i){this.startTime=1e3*parseInt(e.starttime),this.endTime=1e3*parseInt(e.endtime),this.diffTime=e.diffTime,this.timer=null,this.cb=i;var t=this.getCurTime();0===this.endTime&&this.processing(),t>=this.endTime?this.end():(t<this.startTime?this.notBegin():this.processing(),this.run())}$.extend(b.prototype,{getTime:function(){return(new Date).getTime()},getCurTime:function(){return this.getTime()+this.diffTime},notBegin:function(){1!==this.status&&(this.status=1),0<=parseInt(this.getCurTime()/1e3-this.startTime/1e3)&&this.processing()},processing:function(){2!==this.status&&(this.status=2),parseInt(this.endTime/1e3-this.getCurTime()/1e3)<=0&&this.end()},end:function(){this.cb&&this.cb()},run:function(){var e=this;this.timer=setInterval(function(){e.runTime()},1e3)},runTime:function(){1===this.status&&this.notBegin(),2===this.status&&this.processing(),3===this.status&&this.end()},clearTimer:function(){clearInterval(this.timer)}}),$.extend($.fn,{hiddenAttr:function(e){return this.attr((e||"").toLowerCase())||""},U000152:function(r){var i,o=this,e=o.find(".hidden-input"),t=JSON.parse(o.find(".tabs-list").html()),a=parseInt(e.hiddenAttr("productsNum"))||4,d=o.find(".pc-gift-template").html(),n=GESHOP_STATIC,c=o.find(".tab-ul-item"),s=o.find(".geshop-tabs .swiper-slide"),f=2<t.length,u=e.hiddenAttr("serverTime"),h=parseInt(u)-(new Date).getTime(),p=GESHOP_INTERFACE.increasebuylist.url;c.eq(0).show(),loadCss(n+"/resources/javascripts/library/swiper/swiper.min.css"),$LAB.script(n+"/resources/javascripts/library/swiper/swiper.3.4.spec.min.js").wait(function(){setTimeout(function(){i=function(){var e=o.find(".swiper-container");return new Swiper3(e,{slidesPerView:f?2:t.length,loopedSlides:t.length})}(),window._swiper=i,$.each(t,w)},20)});function l(e,t){return e.replace(/\{\{([^{}]*)\}\}/g,function(e,i){return"activity_number"==i&&0==t[i]?"false":(t||{})[i]||""})}function m(e,i,t){var n=[];t=t||{};for(var s=0;s<i.length;s++)n.push(l(d,$.extend({goods_img:"https://geshopimg.logsss.com/uploads/nxQshzC1wXTYy8BmHD6GE39vLWjciKaR.png",index:s+1},i[s],t)));var r=c.eq(e);c.eq(e).html(n.join("")),t.id&&($.each(i,function(e,i){r.find("li").eq(e),"block"!=o.find("li[activity_number = 'false']").find(".act-end").css("display")&&o.find("li[activity_number = 'false']").find(".geshop-components-default-soldout").show()}),new b($.extend({diffTime:h},t),function(){r.find("li").find(".geshop-components-default-soldout").hide(),r.find("li").find(".act-end").show()})),function(){window.GLOBAL&&window.GLOBAL.currency&&window.GLOBAL.currency.change_html(),window.FUN&&window.FUN.currency&&window.FUN.currency.change_html();try{GESHOP_UTIL.goodsLazy("img.js_gdexp_lazy.js-geshopImg-lazyload")}catch(e){}}(c.eq(e))}var g=function(e){for(var i=[],t=0;t<e;t++)i.push({goods_title:"Floral Print Mini Wrap Tea Dress DASDASD asdas",shop_price:19.99,increaseamount:11});return i}(a),w=function(i,e){var t=e.ids;if(t){var n={lang:"undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en",activityid:t,pageno:1,pagesize:a,pipeline:"undefined"!=typeof GESHOP_PIPELINE?GESHOP_PIPELINE:""},s=p;window.GEShopCommonFn_Vue.$jsonp(s,n,{target:r}).done(function(e){m(i,e.data.goodsInfo,e.data.activityInfo)})}else m(i,g)};function v(e){e<=0&&(e=0),e>=t.length-1&&(e=t.length-1),e===T||e<=0||e>=t.length-1?((e===T||e<=0)&&(o.find(".swiper-button-prev-1").addClass("off"),o.find(".swiper-button-next-1").removeClass("off")),e>=t.length-1&&(o.find(".swiper-button-prev-1").removeClass("off"),o.find(".swiper-button-next-1").addClass("off"))):(o.find(".swiper-button-prev-1").removeClass("off"),o.find(".swiper-button-next-1").removeClass("off")),e<t.length-1&&i.slideTo(e),s.removeClass("swiper-slide-active-1").eq(e).addClass("swiper-slide-active-1"),c.hide().eq(e).show(),T=e}var T=0;o.find(".swiper-button-next-1").click(function(){v(T+1)}),o.find(".swiper-button-prev-1").click(function(){v(T-1)}),o.find(".swiper-wrapper .swiper-slide-item-1").click(function(e){var i=parseInt($(this).attr("index"));v(i)})}}),$(function(){$(".geshop-U000152-modal1").each(function(e,i){$(i).U000152(i)})})});