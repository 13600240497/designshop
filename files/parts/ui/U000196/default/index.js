"use strict";$(function(){$(".geshop-U000196-default").map(function(t,a){ge_amount_list_init(a)})});var GE_amount_list_fn=function(c){return this.init={site_code:GESHOP_SITECODE?GESHOP_SITECODE.split("-")[0]:"",languages:{},init_languages:function(){Object.keys(GESHOP_HIGH_AMOUNT_LIST_LANGUAGES).map(function(t){var a="en"==GESHOP_LANG||"fr"==GESHOP_LANG?GESHOP_LANG:"en";this.languages[t]=GESHOP_HIGH_AMOUNT_LIST_LANGUAGES[t][a]}.bind(this))},init_events:function(){var a=this;$(c).find(".js_check-my-ranking").on("click",function(){var t=$(this).attr("data-tag");a.check_my_ranking(t)}),$(c).find(".js_view-rule-btn").on("click",function(){var t=$(this).attr("data-tag");a.show_dialog(t)}),$(c).find(".js_close-dialog").on("click",function(){var t=$(this).attr("data-tag");a.hide_dialog(t)})},show_dialog:function(t){$(c).find("."+t).show()},hide_dialog:function(t){$(c).find("."+t).hide()},animateList:function(){var t=$(c).find(".amount-list-outer-wraper"),a=t.find(".amount-list-container"),n=$(c).attr("data-amount-list-lineheight"),i=0;t.height()<=a.height()&&!function t(){a.animate({top:i-n+"px"},1e3,function(){a.css({top:"0px"}).find("li:first").appendTo(a),t()})}()},get_ajax_data:function(t,a,n){t=t;var i={content:JSON.stringify(a)},e=$(c).attr("data-id");return $.ajax({url:t,type:"get",dataType:"jsonp",data:i,cache:!0,jsonpCallback:"geshop_callback_"+e+"_"+n})},render_amount_list:function(){var t=GESHOP_INTERFACE.user_gettotalconsumptionlist.url,a={starttime:$(c).attr("data-start-time"),endtime:$(c).attr("data-end-time"),amount:$(c).attr("data-amount")},e=this;this.get_ajax_data(t,a,"get_list").done(function(t){if(0==t.code){var i="";t.data.forEach(function(t,a,n){i+='<li class="amount-list-item"><span class="serial-number site-bold-strict">TOP.'+(a+1)+'</span><span class="email">'+t.mail+'</span><span class="payment-text">'+e.languages.rankingListPayment+': </span><span class="payment-amount"><span class="my_shop_price" data-orgp="'+t.amount+'">$'+t.amount+"</span></span></li>"}),$(c).find(".amount-list-container").html(i),e.animateList(),"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.renderCurrency()}else t.code})},check_my_ranking:function(l){var t=GESHOP_INTERFACE.user_gettotalconsumptiondetail.url,a={starttime:$(c).attr("data-start-time")},d=this;this.get_ajax_data(t,a,"check").done(function(t){if(0==t.code){var a='<p class="amount my_shop_price" data-orgp="'+t.data.todayTotal+'">'+t.data.todayTotal+"</p>",n='<p class="amount my_shop_price" data-orgp="'+t.data.areaTotal+'">'+t.data.areaTotal+"</p>",i=100<=t.data.rank?"100+":t.data.rank,e='<p class="amount">'+d.languages.myRankingNum.replace("xxx",i)+"</p>",o='<div class="ranking-item">'+d.languages.todayAmount.replace("xxx.xx",a)+'</div><div class="ranking-item">'+d.languages.totalAmount.replace("xxx.xx",n)+'</div><div class="ranking-item">'+d.languages.myRanking.replace("xxx",e)+"</div>";$(c).find(".ge-196d-dialog-my-ranking .content").html(o),"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.renderCurrency(),d.show_dialog(l)}else if("Please log in first"==t.message){var s=("undefined"!=typeof HTTPS_LOGIN_DOMAIN?HTTPS_LOGIN_DOMAIN:DOMAIN_LOGIN+"/")+"m-users-a-sign.htm",r=window.location.href;window.location.href=s+"?ref="+r}else"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.dialog.message(t.message)})}},this.init};function ge_amount_list_init(t){var a=new GE_amount_list_fn(t);a.init_languages(),a.init_events(),a.render_amount_list()}