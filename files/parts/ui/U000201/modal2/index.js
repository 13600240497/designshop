"use strict";$(function(){var e={isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},debounce:function(i,e,n){var s;return e=e||0,function(){s&&(clearTimeout(s),s=null);var t=Array.prototype.slice.call(arguments);s=setTimeout(function(){i.apply(n.context,t.concat(n))},e)}},throttle:function(e,n,s){n=n||0;var a,o=0;return function(){var t=(new Date).getTime(),i=Array.prototype.slice.call(arguments);o+n<=t?(e.apply(s.context,i.concat(s)),o=t):(a&&(clearTimeout(a),a=null),a=setTimeout(function(){e.apply(s.context,i.concat(s))},n))}},loadCss:function(t){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(i)}};function s(t){var i=this;this.isShow=!1,this.type=this.getType(),this.$component=$(t),this.isEdit=this.$component.hasClass("is-edit"),this.isEdit||(this.EVENT_SUFFIX=s.EVENT_SUFFIX+s.SEED++,this.$container=this.$component.find(".nav-container"),this.$navList=this.$component.find(".nav-item-text"),this.pageSectionMap={},this.$navList.each(function(){var t=$(this).data("floorId");i.pageSectionMap[t]=$(".geshop-component-box[data-id="+t+"]")}),e.isMobile()||this.$component.addClass("is-not-mobile"),!$.fn.swiper3&&$LAB?(this.swiper=null,$LAB.script(GESHOP_STATIC+"/resources/javascripts/library/swiper/swiper.3.4.spec.min.js").wait(function(){i.init()})):i.init())}s.SEED=1,s.EVENT_SUFFIX="dl_nav",s.TYPE_BREAK_POINT=1366,s.TYPE_H="horizontal",s.TYPE_V="vertical",s.prototype={constructor:s,init:function(){this.initShare(),this.initSwiper(),this.bindEvents()},initShare:function(){var t=document.createElement("script");t.src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cc04961c58fe781",document.getElementsByTagName("head")[0].appendChild(t)},isNeedSwiper:function(){if(this.type===s.TYPE_V)return!1;var t=this.$container.css("display");this.$container.css({display:"block",visibility:"hidden"});var i=this.$container.width(),e=this.$container.find(".nav-list").width();return this.$container.css({display:t,visibility:"visible"}),!(e<=i)},initSwiper:function(){if(this.isNeedSwiper()&&!this.swiper){var t=this.$container.css("display");this.$container.css({display:"block",visibility:"hidden"}),this.swiper=new Swiper3(this.$container[0],{wrapperClass:"nav-list",slideClass:"nav-item",slidesPerView:"auto",freeMode:!0}),this.$container.css({display:t,visibility:"visible"})}},removeSwiper:function(){if(this.swiper){var t=this.$container.css("display"),i=this.swiper;this.swiper=null,i.destroy(!0,!0),this.$container.css({display:t})}},getType:function(){return $(window).outerWidth(!0)>=s.TYPE_BREAK_POINT?s.TYPE_V:s.TYPE_H},activeNav:function(t){if(t.addClass("active").parent().siblings(".nav-item").find(".nav-item-text").removeClass("active"),this.swiper){var i=this.$container.width(),e=i/2,n=this.$container.find(".nav-list").width(),s=e,a=n-e,o=t.outerWidth(),r=t.parent().position().left+o/2;r<=s?this.swiper.setWrapperTranslate(0):s<r&&r<a?this.swiper.setWrapperTranslate(e-r):this.swiper.setWrapperTranslate(-n+i),this.swiper.setWrapperTransition(300)}},scrollToElement:function(t){var i=this,e=$(window),n=t.offset().top;this.type===s.TYPE_H?n-=this.$container.outerHeight():n-=this.$container.parents().find(".header-container.js_header").height(),e.off("scroll."+this.EVENT_SUFFIX),$("html, body").stop(!0,!0).animate({scrollTop:n},100,function(){e.on("scroll."+i.EVENT_SUFFIX,i.scrollHandler)})},resizeFn:function(t){var i=this.isNeedSwiper();this.type=this.getType(),i&&!this.swiper?(this.initSwiper(),$(window).triggerHandler("scroll")):!i&&this.swiper&&(this.removeSwiper(),$(window).triggerHandler("scroll"))},scrollFn:function(){var n=this,t=$(window),s=t.scrollTop(),a=t.height()/2,o=null;n.$navList.each(function(){var t=$(this),i=t.data("floorId"),e=n.pageSectionMap[i];if(!(s+a>=e.offset().top))return!1;o=t}),null!==o&&100<s?(this.isShow||(this.isShow=!0,this.$container.stop(!0,!0).fadeIn()),n.activeNav(o)):this.isShow&&(this.isShow=!1,this.$container.stop(!0,!0).fadeOut())},clickHandler:function(t){var i=t.data.context,e=$(t.target),n=e.data("floorId"),s=i.pageSectionMap[n];e.hasClass("active")||(i.activeNav(e),i.scrollToElement(s))},bindEvents:function(){var a=this,t=$(window);this.$component.on("click."+this.EVENT_SUFFIX,".nav-item-text",{context:this},this.clickHandler),this.scrollHandler=e.throttle(this.scrollFn,100,{context:this}),t.on("scroll."+this.EVENT_SUFFIX,this.scrollHandler),this.resizeHandler=e.debounce(this.resizeFn,300,{context:this}),t.on("resize."+this.EVENT_SUFFIX,{context:this},this.resizeHandler),this.$component.on("click",".share-btn",function(){if("web"==GESHOP_PLATFORM){var t={content:$(".layer-share"),modalWidth:"90%",className:"geshop-U000201-modal2-share"};"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.dialog.custom(t)}else if("app"==GESHOP_PLATFORM){var i=a.$component.find("input[name=share_data_title]").val(),e=a.$component.find("input[name=share_data_desc]").val(),n=a.$component.find("input[name=share_data_link]").val(),s=a.$component.find("input[name=share_data_img]").val();window.location.href="webAction://sharing?shareUrl="+n+"&shareTitle="+i+"&shareContent="+e+"&imageUrl="+s}}),$("body").on("click",".U000201-modal2-cancel-btn",function(){"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.dialog.unblock()})},removeEvents:function(){this.$component.off(this.EVENT_SUFFIX),this.scrollHandler=null,this.resizeHandler=null},destroy:function(){this.removeSwiper(),this.removeEvents(),this.type=null,this.$component=null,this.$container=null,this.$navList=null,this.pageSectionMap=null}},$(".geshop-U000201-modal2").each(function(){new s(this)})});