"use strict";var _createClass=function(){function e(t,i){for(var a=0;a<i.length;a++){var e=i[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}$(function(){var a=function(){function i(t){_classCallCheck(this,i),this.$box=t,this.ajx=!1,this.pageSize=140,this.pageCount=0,this.currentPage=1,this.goodList=this.$box.attr("data-skus"),this.init()}return _createClass(i,[{key:"init",value:function(){var t=this,i=GESHOP_STATIC;$LAB.script(i+"/resources/javascripts/library/gs_laytpl.js").wait(function(){gs_laytpl.config({open:"<%",close:"%>"}),t.getSameList(t.goodList),t.bindEvent()})}},{key:"getSameList",value:function(t){var a=this,e=this.$box.find(".u000001-quick-goods-temp").html(),n=this.$box.find(".u000001-quick-goods-list"),i="undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en";if(void 0!==t&&""!=t){var o=t.split(",");a.pageCount=Math.ceil(o.length/a.pageSize),t=o.slice((a.currentPage-1)*a.pageSize,a.currentPage*a.pageSize);var s={lang:i,client:GESHOP_PLATFORM||"pc",goodsSn:t.join(",")},r=GESHOP_INTERFACE.goods_samelist.url,c={content:JSON.stringify(s)};$.ajax({url:r,type:"get",dataType:"jsonp",data:c,success:function(t){var i=t.data;a.ajx=!0,gs_laytpl(e).render(i,function(t){var i=$($.parseHTML(t,document,!0));1===a.currentPage?n.html("").append(i):n.append(i),1==window.GESHOP_PAGE_TYPE?$("img.js_gbexp_lazy").each(function(){$(this).attr("src",$(this).attr("data-original"))}):"undefined"!=typeof GS_GOODS_LAZY_FN&&GS_GOODS_LAZY_FN(i.find("img.js_gbexp_lazy")),window.GLOBAL&&window.GLOBAL.currency&&window.GLOBAL.currency.change_html()})}})}}},{key:"bindEvent",value:function(){this.scrollCalBackFn(),this.$box.on("mouseenter",".same-items",function(){$(this).addClass("on").siblings().removeClass("on");var t=$(this).parents(".mo5-good-list");t.find(".geshop-u000001-quick-list-title a").text($(this).attr("data-title")).attr("href",$(this).attr("data-url")),t.find(".geshop-u000001-quick-list-img a").attr("href",$(this).attr("data-url")),t.find(".js-geshopImg-lazyload").attr("src",$(this).attr("data-img")),t.find(".mol5_quick_shop").attr("data-qkurl",$(this).attr("data-qkurl"))}),this.$box.on("click",".mol5_quick_shop",function(){GEShopSiteCommon.dialog.iframe($(this).attr("data-qkurl"),1080,597,!0)}),this.$box.on("click",".collect-icon",function(){$(this).toggleClass("on")})}},{key:"scrollCalBackFn",value:function(){var t=this;$(window).on("scroll",function(){$(this).scrollTop()>t.$box.find(".geshop-containr").offset().top+t.$box.find(".geshop-containr").height()/3&&t.pageCount>t.currentPage&&t.ajx&&(t.ajx=!1,t.currentPage++,t.getSameList(t.goodList))})}}]),i}();$(".geshop-u000001-quick").each(function(t,i){new a($(i))})});