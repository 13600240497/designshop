"use strict";$(function(){$(".geshop-U000195-default").map(function(a,t){ge_amount_list_init(t)})});var GE_amount_list_fn=function(d){return this.init={site_code:GESHOP_SITECODE?GESHOP_SITECODE.split("-")[0]:"",languages:{},init_languages:function(){Object.keys(GESHOP_HIGH_AMOUNT_LIST_LANGUAGES).map(function(a){var t="en"==GESHOP_LANG||"fr"==GESHOP_LANG?GESHOP_LANG:"en";this.languages[a]=GESHOP_HIGH_AMOUNT_LIST_LANGUAGES[a][t]}.bind(this))},init_events:function(){var t=this;$(d).find(".js_check-my-ranking").on("click",function(){var a=$(this).attr("data-tag");t.check_my_ranking(a)}),$(d).find(".js_view-rule-btn").on("click",function(){var a=$(this).attr("data-tag");t.show_dialog(a)}),$(d).find(".js_close-dialog").on("click",function(){var a=$(this).attr("data-tag");t.hide_dialog(a)})},show_dialog:function(a){$(d).find("."+a).show()},hide_dialog:function(a){$(d).find("."+a).hide()},animateList:function(){var a=$(d).find(".amount-list-outer-wraper"),t=a.find(".amount-list-container"),n=$(d).attr("data-amount-list-lineheight"),i=0;a.height()<=t.height()&&!function a(){t.animate({top:i-n+"px"},1e3,function(){t.css({top:"0px"}).find("li:first").appendTo(t),a()})}()},get_ajax_data:function(a,t,n){a=a;var i={content:JSON.stringify(t)},e=$(d).attr("data-id");return $.ajax({url:a,type:"get",dataType:"jsonp",data:i,cache:!0,jsonpCallback:"geshop_callback_"+e+"_"+n})},render_amount_list:function(){var a=GESHOP_INTERFACE.user_gettotalconsumptionlist.url,t={starttime:$(d).attr("data-start-time"),endtime:$(d).attr("data-end-time"),amount:$(d).attr("data-amount")},e=this;this.get_ajax_data(a,t,"get_list").done(function(a){if(0==a.code){var i="";a.data.forEach(function(a,t,n){i+='<li class="amount-list-item"><span class="serial-number site-bold-strict">TOP.'+(t+1)+'</span><span class="email">'+a.mail+'</span><span class="payment-text">'+e.languages.rankingListPayment+': </span><span class="payment-amount"><span class="my_shop_price" data-orgp="'+a.amount+'">$'+a.amount+"</span></span></li>"}),$(d).find(".amount-list-container").html(i),e.animateList(),"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.renderCurrency()}else a.code})},check_my_ranking:function(l){var a=GESHOP_INTERFACE.user_gettotalconsumptiondetail.url,t={starttime:$(d).attr("data-start-time")},c=this;this.get_ajax_data(a,t,"check").done(function(a){if(0==a.code){var t='<span class="amount my_shop_price" data-orgp="'+a.data.todayTotal+'">'+a.data.todayTotal+"</span>",n='<span class="amount my_shop_price" data-orgp="'+a.data.areaTotal+'">'+a.data.areaTotal+"</span>",i=100<=a.data.rank?"100+":a.data.rank,e='<span class="amount">'+c.languages.myRankingNum.replace("xxx",i)+"</span>",s='<p class="ranking-item">'+c.languages.todayAmount.replace("xxx.xx",t)+'</p><p class="ranking-item">'+c.languages.totalAmount.replace("xxx.xx",n)+'</p><p class="ranking-item">'+c.languages.myRanking.replace("xxx",e)+"</p>";$(d).find(".ge-195d-dialog-my-ranking .content").html(s),"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.renderCurrency(),c.show_dialog(l)}else if("Please log in first"==a.message){var o=("undefined"!=typeof HTTPS_LOGIN_DOMAIN?HTTPS_LOGIN_DOMAIN:DOMAIN_LOGIN+"/")+GESHOP_LANG+"/m-users-a-sign.htm",r=window.location.href;window.location.href=o+"?ref="+r}else"undefined"!=typeof GEShopSiteCommon&&GEShopSiteCommon.dialog.message(a.message)})}},this.init};function ge_amount_list_init(a){var t=new GE_amount_list_fn(a);t.init_languages(),t.init_events(),t.render_amount_list()}