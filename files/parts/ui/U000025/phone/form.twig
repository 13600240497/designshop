{% set formData = {
    id: 'U000025',
    name: 'Banner 组件',
    theme: 'rule',
    tabs: [
        {
            label: '样式配置',
            components: [
                {
                    label: '常用配置',
                    type: 'fieldset',
                    components: [
                        {
                            label: '组件上边距(px)',
                            name: 'margin_top',
                            public: false,
                            default: '0',
                            col: 2
                        },
                        {
                            label: '组件下边距(px)',
                            name: 'margin_bottom',
                            public: false,
                            default: '32',
                            col: 2
                        }
                    ]
                },
                {
                    label: '图片配置',
                    type: 'fieldset',
                    components: [
                        {
                            label: '图片宽度(px)',
                            name: 'img_width',
                            public: false,
                            default: '1200',
                            col: 2
                        },
                        {
                            label: '高度高度(px)',
                            name: 'img_height',
                            public: false,
                            default: '480',
                            col: 2
                        },
                        {
                            type: 'diy',
                            src: './form-img.twig'
                        }
                    ]
                },
                {
                    label: '按钮配置',
                    type: 'fieldset',
                    components: [
                        {
                            label: '按钮文案',
                            type: 'image',
                            name: 'btn_title',
                            default: 'Mobile Number',
                            public: false
                        },
                        {
                            label: '按钮宽度(px)',
                            name: 'btn_width',
                            public: false,
                            default: '166',
                            col: 2
                        },
                        {
                            label: '按钮高度(px)',
                            name: 'btn_height',
                            public: false,
                            default: '38',
                            col: 2
                        },
                        {
                            label: '按钮上偏移(px)',
                            name: 'btn_offset_up',
                            public: false,
                            default: '40',
                            col: 2
                        },
                        {
                            label: '按钮右偏移(px)',
                            name: 'btn_offset_right',
                            public: false,
                            default: '40',
                            col: 2
                        },
                        {
                            label: '按钮文字颜色',
                            name: 'btn_foot_color',
                            type: 'colorPicker',
                            default: '#FFFFFF',
                            public: false,
                            col: 2
                        },
                        {
                            label: '按钮背景颜色',
                            name: 'btn_bg_color',
                            type: 'colorPicker',
                            default: '#333333',
                            public: false,
                            col: 2
                        },
                        {
                            label: '按钮背景图片',
                            name: 'btn_bg_img',
                            type: 'image'
                        },
                        {
                            label: '按钮圆角',
                            desc: '(请按格式填写：左上 右上 右下 左下，例如：8px 8px 8px 8px，请注意要写上px否则无效)',
                            name: 'btn_border_radius',
                            public: false,
                            default: '4px 4px 4px 4px'
                        },
                        {
                            label: '按钮文字大小(px)',
                            name: 'btn_title_size',
                            default: '14'
                        }
                    ]
                }
            ]
        }
    ],
    beforeSubmit: 'onSubmit'

} %}

    {# 引入渲染函数 #}
    {{ include ('@app/files/parts/formTemplate/formRender.twig', formData) }}

<script>
    $(function () {
        $('input[name=img_url]').on('blur', function () {
            var value = $(this).val();
            if (value) {
                var image = new Image();
                image.src = value;
                image.onload = function () {
                    $('input[name=img_width]').val(image.width);
                    $('input[name=img_height]').val(image.height);
                };
            };
        });
    });

    function onSubmit(progress) {
        progress.next();
    };
</script>
