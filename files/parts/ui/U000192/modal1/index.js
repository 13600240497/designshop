"use strict";$(function(){var N=$("input[name=is-editenv]").val();function h(t){if("zf-wap"==GESHOP_SITECODE||"zf-app"==GESHOP_SITECODE){var a=""==$("#js_topCartNum").text()?0:parseInt($("#js_topCartNum").text());99<a+parseInt(t.val())?$("#js_topCartNum").text("99+"):$("#js_topCartNum").text(a+parseInt(t.val())),layer.open({content:GESHOP_LANGUAGES.addcart_success,skin:"msg",time:2})}else"rg-wap"==GESHOP_SITECODE&&GLOBAL.cart.cartItems(),layer.open({type:1,style:"border-radius:9px",content:$(".layer-pop").html()})}function s(x){setTimeout(function(){var t="undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en",a=[];1==N?$(".geshop-U000192-modal1").each(function(){$(this).find("input[name=goods-sku]").val()?a.push($(this).find("input[name=goods-sku]").val().split(",")):a.push([])}):$(x).find("input[name=goods-sku]").val()?a.push($(x).find("input[name=goods-sku]").val().split(",")):a.push([]);var s={lang:t,platform:GESHOP_PLATFORM,skus:a},i=GESHOP_INTERFACE.goods_combogoods.url;window.GEShopCommonFn_Vue.$jsonp(i,s).done(function(t){if("0"==t.code)for(var a=0;a<t.data.length;a++){var s=1==N?$(".geshop-U000192-modal1").eq(a):$(x),i=Object.keys(t.data[a].goods_list);if(o='<input type="hidden" name="cart-num" value="'+i.length+'"/>',o+="<ul class='goods-list clearfix'>",0==t.data[a].goods_list.length){var o="<ul class='goods-list clearfix'>";o+="<li>",o+='<a class="goods-img">',o+='<img src="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" class="js_loadingimg js-attribute-img" data-original="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" alt="zaful" title="zaful" style="display: inline;">',o+="</a>",o+='\t<p class="mt10 price-wrap">',o+='<span class="my_shop_price price js-shop-price" data-orgp="0.00" data-bz="0.00">0.00</span>',o+="</p>",o+='<div class="info-wrap">',o+='<span class="attribute-wrap pr">',o+='<span class="attribute-text  js-color-value js-attribute-value">COLOR</span>',o+='\t<span class="arrows js-color-btn js-attribute-btn" title="COLOR"></span>  ',o+='<div class="attribute-list js-attribute-list js-color-attribute" data-color="COLOR">',o+="</div>",o+="</span>",o+='<span class="attribute-wrap pr">',o+='\t<span class="attribute-text  js-size-value js-attribute-value">L</span>',o+='<span class="arrows js-size-btn js-attribute-btn"></span>',o+='<div class="attribute-list js-attribute-list js-size-attribute"  data-size="L">',o+="\t</div>",o+="</span>",o+="</div>",o+="</li>",o+="<li>",o+='<a class="goods-img">',o+='<img src="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" data-original="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" style="display: inline;">',o+="</a>",o+='\t<p class=" price-wrap">',o+='<span class="my_shop_price price js-shop-price" data-orgp="0.00" data-bz="0.00">0.00</span>',o+="</p>",o+='<div class="info-wrap">',o+='<span class="attribute-wrap pr">',o+='<span class="attribute-text  js-color-value js-attribute-value">COLOR</span>',o+='\t<span class="arrows js-color-btn js-attribute-btn" title="COLOR"></span>  ',o+='<div class="attribute-list js-attribute-list js-color-attribute" data-color="COLOR">',o+="</div>",o+="</span>",o+='<span class="attribute-wrap pr">',o+='\t<span class="attribute-text  js-size-value js-attribute-value">L</span>',o+='<span class="arrows js-size-btn js-attribute-btn"></span>',o+='<div class="attribute-list js-attribute-list js-size-attribute"  data-size="L">',o+="\t</div>",o+="</span>",o+="</div>",o+="</li>",o+="</ul>",o+='<div class="cart-wrap">',o+='<p><span class="my_shop_price group-price fb js-group-price" data-orgp="0.00" data-bz="0.00">0.00</span></p>',o+='<p><del class="my_shop_price total-price fb js-total-price" data-orgp="0.00" data-bz="0.00">0.00</del></p>',o+='<div class="cart-btn-wrap js-add-cart">',o+='<i class="ico-cart"></i>',o+='<span class="cart-text fb"> GET THE SET</span> ',o+="</div>",$(".geshop-U000192-modal1").each(function(){$(this).find(".combo-wrap").html()||$(this).find(".combo-wrap").html(o)})}else{var e=0,r=s.find("input[name=goods-sku]").val().split(",");for(var n in t.data[a].goods_list){if(t.data[a].goods_list.hasOwnProperty(r[e])){for(var l,d=t.data[a].goods_list[r[e]],p="",c="",u={},g={},h={},b={},f={},m={},v={},j=0;j<t.data[a].goods_list[r[e]].length;j++){var _=t.data[a].goods_list[r[e]][j];p+=_.size+",",c+=_.color+",";var w=_.color.split(" ").join("_");sizeName=_.size.split(" ").join("_"),goodsId=_.goods_id,goodsSn=[r[e]],u[w+"/"+sizeName]=goodsId,g[goodsId]=d[j].goods_img,b[goodsId]=d[j].shop_price,f[goodsId]=d[j].url_title,m[goodsId]=d[j].goods_sn,v[goodsId]=d[j].active_num+"_"+d[j].is_on_sale,h.hasOwnProperty(w)?h.hasOwnProperty(w)&&(h[w]=h[w]+","+sizeName):h[w]=sizeName}var O=t.data[a].goods_list[r[e]];if(0<O.length)for(var y=0;y<O.length;y++)O[y].goods_sn==goodsSn&&(l=O[y]);o+="<li data-stockObj ="+JSON.stringify(v)+' data-goodsId = "'+goodsId+'" data-isshow="'+l.is_show+'" data-activenum="'+l.active_num+'" data-onSale="'+l.is_on_sale+'" data-goods="'+goodsSn+'" data-attribute='+JSON.stringify(u)+" data-url="+JSON.stringify(f)+" data-price="+JSON.stringify(b)+" data-goodsImg="+JSON.stringify(g)+" data-sn="+JSON.stringify(m)+">";var S=$(s).find("input[name=lang-soldout]").val();o+='<div class="soldout"><span>'+S+"</span></div>",o+='<a class="goods-img" href="'+l.url_title+'">',o+='<img src="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png"  data-original="'+l.goods_img+'" class="js_loadingimg js-attribute-img" style="display: inline;">',o+="</a>",o+='\t<p class="price-wrap">',o+='<span class="my_shop_price price js-shop-price" data-orgp="'+l.shop_price+'" data-bz="'+l.shop_price+'">'+l.shop_price+"</span>",o+="</p>",o+='<div class="info-wrap">',o+='<div class="attribute-wrap pr">',o+='<span class="attribute-text  js-color-value js-attribute-value">'+l.color+"</span>",o+='<span class="shad-wrap"></span>',o+='\t<span class="arrows js-color-btn js-attribute-btn" title="'+l.color+'"></span>  ',o+='<div class="attribute-list js-attribute-list js-color-attribute" data-color="'+c+'">',o+="</div>",o+="</div>",o+='<div class="attribute-wrap pr">',o+='\t<span class="attribute-text  js-size-value js-attribute-value">'+l.size+"</span>",o+='<span class="shad-wrap"></span>',o+='<span class="arrows js-size-btn js-attribute-btn"></span>',o+='<div class="attribute-list js-attribute-list js-size-attribute"  data-size="'+p+'">',o+="\t</div>",o+="</div>",o+="</div>",o+="</li>"}e++}o+="</ul>",o+='<div class="cart-wrap">',o+='<p><span class="my_shop_price group-price fb js-group-price" data-orgp="'+t.data[a].group_purchase_price+'" data-bz="'+t.data[a].group_purchase_price+'">'+t.data[a].group_purchase_price+"</span></p>",o+='<p><del class="my_shop_price total-price fb js-total-price" data-orgp="'+t.data[a].total_shop_price+'" data-bz="'+t.data[a].total_shop_price+'">'+t.data[a].total_shop_price+"</del></p>",0==l.active_num||0==l.is_on_sale?o+='<div class="cart-btn-wrap js-add-cart disabled">':o+='<div class="cart-btn-wrap js-add-cart">',o+='<i class="ico-cart"></i>',o+='<span class="cart-text fb"> GET THE SET</span> ',o+="</div>",$(s).find(".combo-wrap").html(o),0==N&&GLOBAL.currency.change_html();var z=$(s).find("input[name=btn-text]").val();$(s).find(".cart-text").text(z);var E=JSON.parse($(s).find("input[name=sku-img]").val()),C=$(s).find(".goods-list li");if(E)for(var G=0;G<C.length;G++)for(var L=$(C[G]).attr("data-goods"),k=0;k<E.length;k++)L===E[k].sku&&$(C[G]).find(".js-attribute-img").attr("data-original",E[k].img);0==N?$.fn.lazyload?$("img.js_loadingimg").lazyload():window.GS_GOODS_LAZY_FN(".js_loadingimg"):$("img.js_loadingimg").each(function(){$(this).attr("src",$(this).attr("data-original"))}),$(".geshop-U000192-modal1").each(function(){$(this).find(".goods-list li").each(function(){var t=$(this).find(".js-color-attribute").data("color").split(","),a=$(this).find(".js-size-attribute").data("size").split(","),s="",i="";if(1<A(t).length)for(var o=$.trim($(this).find(".js-size-value").text()),e=0;e<A(t).length;e++)o==A(a)[e]?s+='<a class="on" data-color="'+A(t)[e]+'" data-type="color">'+A(t)[e]+" </a>":s+='<a data-color="'+A(t)[e]+'" data-type="color">'+A(t)[e]+" </a>";else $(this).find(".js-color-attribute").attr("data-attr-num",1);if(1<A(a).length)for(o=$.trim($(this).find(".js-size-value").text()),e=0;e<A(a).length;e++)o==A(a)[e]?i+='<a  class="on" data-size="'+A(a)[e]+'" data-type="size">'+A(a)[e]+"</a>":i+='<a data-size="'+A(a)[e]+'" data-type="size">'+A(a)[e]+"</a>";else $(this).find(".js-size-attribute").attr("data-attr-num",1);$(this).find(".js-color-attribute").html(s),$(this).find(".js-size-attribute").html(i);var r=$(this).attr("data-onsale"),n=$(this).attr("data-activenum"),l=$(this).attr("data-isshow");0!=n&&0!=r&&0!=l||($(this).find(".soldout").show(),$(this).parents(".combo-wrap").find(".js-add-cart").addClass("unclickable"))})})}}})},200)}function A(t){for(var a=[],s=0,i=t.length;s<i;s++){var o=t[s];-1===a.indexOf(o)&&o&&a.push(o)}return a}$("body").on("click",".js-color-btn",function(t){var a=$(this);1!=a.next().data("attr-num")&&($("body").addClass("fixed"),a.hasClass("on")?(a.removeClass("on"),a.closest(".attribute-wrap").find(".shad-wrap").hide()):(a.addClass("on"),$(".js-color-attribute").hide(),a.closest(".attribute-wrap").find(".js-color-attribute").show(),a.closest(".attribute-wrap").find(".shad-wrap").show())),t.preventDefault()}),$("body").on("click",".js-size-btn",function(t){var a=$(this);1!=a.next().data("attr-num")&&($("body").addClass("fixed"),a.hasClass("on")&&1!=a.next().data("attr-num")?(a.removeClass("on"),a.closest(".attribute-wrap").find(".js-size-attribute").hide(),a.closest(".attribute-wrap").find(".shad-wrap").hide()):(a.addClass("on"),$(".js-size-attribute").hide(),a.closest(".attribute-wrap").find(".js-size-attribute").show(),a.closest(".attribute-wrap").find(".shad-wrap").show())),t.preventDefault()}),$("body").on("click",function(t){var a=window.event||t,s=a.target||a.srcElement;s&&!$(s).hasClass("js-color-btn")&&($(".js-color-attribute").hide(),$(".js-color-btn").removeClass("on")),s&&!$(s).hasClass("js-size-btn")&&($(".js-size-attribute").hide(),$(".js-size-btn").removeClass("on")),s&&!$(s).hasClass("js-attribute-btn")&&($(this).removeClass("fixed"),$(".shad-wrap").hide()),$(".js-attribute-list").each(function(t,a){"block"==$(a).css("display")&&$(a).closest("li").data("goods")!=$(s).closest("li").data("goods")&&$(s).hasClass("js-attribute-btn")&&($(a).hide(),$(a).closest(".attribute-wrap").find(".js-attribute-btn").removeClass("on"))})}),$("body").on("click",".js-attribute-list a",function(t){var a=$(this);$(this).addClass("on").siblings().removeClass("on");var s=a.text();a.data("type");a.closest(".attribute-wrap").find(".js-attribute-value").text(s),a.closest(".js-attribute-list").hide(),a.closest(".js-attribute-list").prev(".js-attribute-btn").removeClass("on").attr("title",s),function(t){t=$(t);var a,s=$.trim(t.find(".js-size-value").text()),i=$.trim(t.find(".js-color-value").text()),o=t.data("attribute"),e=t.data("goodsimg"),r=t.data("price"),n=t.data("url"),l=t.data("sn");1<$.trim(i).split(" ").length&&(i=i.split(" ").join("_"));1<$.trim(s).split(" ").length&&(s=s.split(" ").join("_"));s&&i&&(a=o[$.trim(i)+"/"+$.trim(s)]);t.find(".js-attribute-img").attr("src",e[a]),t.find(">a").attr("href",n[a]),t.find(".js-shop-price").text(r[a]),t.find(".js-shop-price").attr("data-orgp",r[a]),t.find(".js-shop-price").attr("data-bz",r[a]);var d=l[a];t.attr("data-goods",d),t.attr("data-goodsid",a);for(var p=t.closest(".goods-list").find("li"),c=[],u=0;u<p.length;u++){var g=p[u];c.push($(g).data("goods"))}0==N&&GLOBAL.currency.change_html();var h=t.data("stockobj"),b=t.data("isshow");if(h[a]){var f=h[a].split("_");0==f[0]||0==f[1]||0==b?(t.find(".soldout").show(),t.parents(".combo-wrap").find(".cart-btn-wrap").addClass("unclickable")):(t.find(".soldout").hide(),t.parents(".combo-wrap").find(".cart-btn-wrap").removeClass("unclickable"))}$(".geshop-U000192-modal1").each(function(){$(this).find(".goods-list li").each(function(){"block"==$(this).find(".soldout").css("display")&&$(this).parents(".combo-wrap").find(".cart-btn-wrap").addClass("unclickable")})}),function(t,a){var s={lang:"undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en",platform:GESHOP_PLATFORM,skus:t.join(",")},i=GESHOP_INTERFACE.goods_comboprice.url;window.GEShopCommonFn_Vue.$jsonp(i,s).done(function(t){"0"==t.code&&($(a).parents(".combo-wrap").find(".group-price").text(t.data),$(a).parents(".combo-wrap").find(".group-price").attr("data-orgp",t.data),$(a).parents(".combo-wrap").find(".group-price").attr("data-b",t.data),0==N&&GLOBAL.currency.change_html())})}(c,t)}(a.closest("li")),t.preventDefault()}),$(document).on("click",".checknow-link",function(t){"rg-app"==GESHOP_SITECODE?window.location.href="rosegal://action?actiontype=11&name=wishList&source=deeplink":"rg-wap"==GESHOP_SITECODE&&(window.location.href=DOMAIN_CART+"/m-flow-a-cart.htm")}),$("body").on("click",".ico-close",function(t){layer.closeAll()}),$("body").on("click",".js-add-cart",function(t){if(!$(this).hasClass("unclickable")){for(var a=$(this).parents(".combo-wrap").find(".goods-list li"),s=$(this).parents(".combo-wrap").find("input[name=cart-num]"),i=[],o=[],e=0;e<a.length;e++){var r=a[e],n=$(r).attr("data-goods");i.push(n);var l,d=JSON.parse($(r).attr("data-sn"));for(var p in d){if(d.hasOwnProperty(p))(r=d[p])===n&&(l=p)}o.push(l)}if("zf-app"==GESHOP_SITECODE)window.location.href="zaful://action?actiontype=16&url="+o.join(",")+"&source=deepLink",setTimeout(function(){h()},1e3);else if("rg-app"==GESHOP_SITECODE){var c=new Array(o.length+1).join("1").split("").join(",");window.location="webAction://addToCart?goodsId="+o.join(",")+"&num="+c+"&callback=addsucess(a)&goods_type=&p_source=recruit2.0",setTimeout(function(){h()},1e3)}else{var u={lang:"undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en",platform:GESHOP_PLATFORM,skus:i.join(",")},g=GESHOP_INTERFACE.goods_comboaddcart.url;window.GEShopCommonFn_Vue.$jsonp(g,u).done(function(t){"0"==t.code&&h(s)})}}}),1!=N?$LAB.script(GESHOP_STATIC+"/resources/javascripts/library/in-view.js").wait(function(){$(".geshop-U000192-modal1").each(function(t,a){inView(".geshop-U000192-modal1-"+$(a).data("id")).once("enter",function(t){s(t)})})}):s($(".geshop-U000192-modal1"))});