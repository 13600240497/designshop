"use strict";$(function(){var N=$("input[name=is-editenv]").val();function h(t){if("zf-wap"==GESHOP_SITECODE||"zf-app"==GESHOP_SITECODE){var a=$(".js_cart_nums"),s=(""==a.text()?0:parseInt(a.text()))+parseInt(t.val());99<s?a.text("99+"):a.text(s),0<s&&a.show(),layer.open({content:GESHOP_LANGUAGES.addcart_success,skin:"msg",time:2})}else"rg-wap"==GESHOP_SITECODE&&GLOBAL.cart.cartItems(),layer.open({type:1,style:"border-radius:9px",content:$(".layer-pop").html()})}function s(P){setTimeout(function(){var t="undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en",a=[];1==N?$(".geshop-U000192-default").each(function(){$(this).find("input[name=goods-sku]").val()?a.push($(this).find("input[name=goods-sku]").val().split(",")):a.push([])}):$(P).find("input[name=goods-sku]").val()?a.push($(P).find("input[name=goods-sku]").val().split(",")):a.push([]);var s={lang:t,platform:GESHOP_PLATFORM,skus:a},i=GESHOP_INTERFACE.goods_combogoods.url,o=$(P).attr("data-id");window.GEShopCommonFn_Vue.$jsonp(i,s,{pid:o}).done(function(t){if("0"==t.code)for(var a=0;a<t.data.length;a++){var s=1==N?$(".geshop-U000192-default").eq(a):$(P),i=Object.keys(t.data[a].goods_list);if(o='<input type="hidden" name="cart-num" value="'+i.length+'"/>',o+="<ul class='goods-list clearfix'>",0==t.data[a].goods_list.length){var o="<ul class='goods-list clearfix'>";o+="<li>",o+='<a class="goods-img">',o+='<img src="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" class="js_gdexp_lazy js-geshopImg-lazyload" data-original="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" alt="zaful" title="zaful" style="display: inline;">',o+="</a>",o+='\t<p class="mt10 price-wrap">',o+='<span class="my_shop_price price js-shop-price site-bold-strict" data-orgp="0.00" data-bz="0.00">0.00</span>',o+="</p>",o+="<div>",o+='<span class="attribute-wrap pr">',o+='<span class="attribute-text ml10 js-color-value js-attribute-value">COLOR</span>',o+='\t<span class="arrows js-color-btn js-attribute-btn" title="COLOR"></span>  ',o+='<div class="attribute-list js-attribute-list js-color-attribute" data-color="COLOR">',o+="</div>",o+="</span>",o+='<span class="attribute-wrap pr">',o+='\t<span class="attribute-text ml10 js-size-value js-attribute-value">L</span>',o+='<span class="arrows js-size-btn js-attribute-btn"></span>',o+='<div class="attribute-list js-attribute-list js-size-attribute"  data-size="L">',o+="\t</div>",o+="</span>",o+="</div>",o+="</li>",o+="<li>",o+='<a class="goods-img">',o+='<img src="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" data-original="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png" style="display: inline;">',o+="</a>",o+='\t<p class="mt10 price-wrap">',o+='<span class="my_shop_price price js-shop-price site-bold-strict" data-orgp="0.00" data-bz="0.00">0.00</span>',o+="</p>",o+='<div class="mt10">',o+='<span class="attribute-wrap pr">',o+='<span class="attribute-text ml10 js-color-value js-attribute-value">COLOR</span>',o+='\t<span class="arrows js-color-btn js-attribute-btn" title="COLOR"></span>  ',o+='<div class="attribute-list js-attribute-list js-color-attribute" data-color="COLOR">',o+="</div>",o+="</span>",o+='<span class="attribute-wrap pr">',o+='\t<span class="attribute-text ml10 js-size-value js-attribute-value">L</span>',o+='<span class="arrows js-size-btn js-attribute-btn"></span>',o+='<div class="attribute-list js-attribute-list js-size-attribute"  data-size="L">',o+="\t</div>",o+="</span>",o+="</div>",o+="</li>",o+="</ul>",o+='<div class="cart-wrap">',o+='<p><span class="my_shop_price group-price fb js-group-price" data-orgp="0.00" data-bz="0.00">0.00</span></p>',o+='<p><del class="my_shop_price total-price fb js-total-price" data-orgp="0.00" data-bz="0.00">0.00</del></p>',o+='<div class="cart-btn-wrap js-add-cart btn__site-default">',o+='<i class="ico-cart"></i>',o+='<span class="cart-text fb"> GET THE SET</span> ',o+="</div>",$(".geshop-U000192-default").each(function(){$(this).find(".combo-wrap").html()||$(this).find(".combo-wrap").html(o)})}else{var e=0,r=s.find("input[name=goods-sku]").val().split(",");for(var n in t.data[a].goods_list){if(t.data[a].goods_list.hasOwnProperty(r[e])){for(var l,d=t.data[a].goods_list[r[e]],p="",c="",u={},b={},h={},f={},g={},m={},v={},_=0;_<t.data[a].goods_list[r[e]].length;_++){var j=t.data[a].goods_list[r[e]][_];p+=j.size+",",c+=j.color+",";var w=j.color.split(" ").join("_"),O=j.size.split(" ").join("_"),S=j.goods_id,y=[r[e]];b[u[w+"/"+O]=S]=d[_].goods_img,f[S]=d[_].shop_price,g[S]=d[_].url_title,m[S]=d[_].goods_sn,v[S]=d[_].active_num+"_"+d[_].is_on_sale,h.hasOwnProperty(w)?h.hasOwnProperty(w)&&(h[w]=h[w]+","+O):h[w]=O}var E=t.data[a].goods_list[r[e]];if(0<E.length)for(var C=0;C<E.length;C++)E[C].goods_sn==y&&(l=E[C]);o+="<li data-stockObj ="+JSON.stringify(v)+' data-goodsId = "'+S+'" data-isshow="'+l.is_show+'" data-activenum="'+l.active_num+'" data-onSale="'+l.is_on_sale+'" data-goods="'+y+'" data-attribute='+JSON.stringify(u)+" data-url="+JSON.stringify(g)+" data-price="+JSON.stringify(f)+" data-goodsImg="+JSON.stringify(b)+" data-sn="+JSON.stringify(m)+">";var z=$(s).find("input[name=lang-soldout]").val();o+='<div class="soldout"><span>'+z+"</span></div>",o+='<a class="goods-img" href="'+l.url_title+'">',o+='<img src="https://geshopimg.logsss.com/uploads/FRcjv8nNOT0BbSfV9ht3ZLemuo1K2AqQ.png"  data-original="'+l.goods_img+'" class="js_gdexp_lazy js-geshopImg-lazyload" style="display: inline;">',o+="</a>",o+='\t<p class="mt10 price-wrap">',o+='<span class="my_shop_price price js-shop-price site-bold-strict" data-orgp="'+l.shop_price+'" data-bz="'+l.shop_price+'">'+l.shop_price+"</span>",o+="</p>",o+='<div class="mt10">',o+='<span class="attribute-wrap pr">',o+='<span class="attribute-text ml10 js-color-value js-attribute-value">'+l.color+"</span>",o+='\t<span class="arrows js-color-btn js-attribute-btn" title="'+l.color+'"></span>  ',o+='<div class="attribute-list js-attribute-list js-color-attribute" data-color="'+c+'">',o+="</div>",o+="</span>",o+='<span class="attribute-wrap pr">',o+='\t<span class="attribute-text ml10 js-size-value js-attribute-value">'+l.size+"</span>",o+='<span class="arrows js-size-btn js-attribute-btn"></span>',o+='<div class="attribute-list js-attribute-list js-size-attribute"  data-size="'+p+'">',o+="\t</div>",o+="</span>",o+="</div>",o+="</li>"}e++}o+="</ul>",o+='<div class="cart-wrap">',o+='<p><span class="my_shop_price group-price fb js-group-price" data-orgp="'+t.data[a].group_purchase_price+'" data-bz="'+t.data[a].group_purchase_price+'">'+t.data[a].group_purchase_price+"</span></p>",o+='<p><del class="my_shop_price total-price fb js-total-price" data-orgp="'+t.data[a].total_shop_price+'" data-bz="'+t.data[a].total_shop_price+'">'+t.data[a].total_shop_price+"</del></p>",0==l.active_num||0==l.is_on_sale?o+='<div class="cart-btn-wrap js-add-cart btn__site-default disabled">':o+='<div class="cart-btn-wrap js-add-cart btn__site-default">',o+='<i class="ico-cart"></i>',o+='<span class="cart-text fb"> GET THE SET</span> ',o+="</div>",$(s).find(".combo-wrap").html(o);var G=$(s).find("input[name=btn-text]").val();$(s).find(".cart-text").text(G);var k=JSON.parse($(s).find("input[name=sku-img]").val()),L=$(s).find(".goods-list li");if(k)for(var A=0;A<L.length;A++)for(var T=$(L[A]).attr("data-goods"),x=0;x<k.length;x++)T===k[x].sku&&$(L[A]).find(".js-attribute-img").attr("data-original",k[x].img);window.GS_GOODS_LAZY_FN&&window.GS_GOODS_LAZY_FN(),0==N?window.GEShopSiteCommon&&window.GEShopSiteCommon.renderCurrency_v2():$("img.js_loadingimg").each(function(){$(this).attr("src",$(this).attr("data-original"))}),$(".geshop-U000192-default").each(function(){$(this).find(".goods-list li").each(function(){var t=$(this).find(".js-color-attribute").data("color").split(","),a=$(this).find(".js-size-attribute").data("size").split(","),s="",i="";if(1<H(t).length)for(var o=0;o<H(t).length;o++)s+='<a data-color="'+H(t)[o]+'" data-type="color">'+H(t)[o]+" </a>";else $(this).find(".js-color-attribute").attr("data-attr-num",1),$(this).find(".js-color-btn").addClass("noneArrow");if(1<H(a).length)for(o=0;o<H(a).length;o++)i+='<a data-size="'+H(a)[o]+'" data-type="size">'+H(a)[o]+"</a>";else $(this).find(".js-size-attribute").attr("data-attr-num",1),$(this).find(".js-size-btn").addClass("noneArrow");$(this).find(".js-color-attribute").html(s),$(this).find(".js-size-attribute").html(i);var e=$(this).attr("data-onsale"),r=$(this).attr("data-activenum"),n=$(this).attr("data-isshow");0!=r&&0!=e&&0!=n||($(this).find(".soldout").show(),$(this).parents(".combo-wrap").find(".js-add-cart").addClass("unclickable"))})})}}})},200)}function H(t){for(var a=[],s=0,i=t.length;s<i;s++){var o=t[s];-1===a.indexOf(o)&&o&&a.push(o)}return a}$("body").on("click",".js-color-btn",function(t){var a=$(this);1!=a.next().data("attr-num")&&(a.hasClass("on")?a.removeClass("on"):(a.addClass("on"),$(".js-color-attribute").hide(),a.closest(".attribute-wrap").find(".js-color-attribute").show())),t.preventDefault()}),$("body").on("click",".js-size-btn",function(t){var a=$(this);1!=a.next().data("attr-num")&&(a.hasClass("on")&&1!=a.next().data("attr-num")?(a.removeClass("on"),a.closest(".attribute-wrap").find(".js-size-attribute").hide()):(a.addClass("on"),$(".js-size-attribute").hide(),a.closest(".attribute-wrap").find(".js-size-attribute").show())),t.preventDefault()}),$("body").on("click",function(t){var a=window.event||t,s=a.target||a.srcElement;s&&!$(s).hasClass("js-color-btn")&&($(".js-color-attribute").hide(),$(".js-color-btn").removeClass("on")),s&&!$(s).hasClass("js-size-btn")&&($(".js-size-attribute").hide(),$(".js-size-btn").removeClass("on")),$(".js-attribute-list").each(function(t,a){"block"==$(a).css("display")&&$(a).closest("li").data("goods")!=$(s).closest("li").data("goods")&&$(s).hasClass("js-attribute-btn")&&($(a).hide(),$(a).closest(".attribute-wrap").find(".js-attribute-btn").removeClass("on"))})}),$("body").on("click",".js-attribute-list a",function(t){var a=$(this),s=a.text();a.data("type");a.closest(".attribute-wrap").find(".js-attribute-value").text(s),a.closest(".js-attribute-list").hide(),a.closest(".js-attribute-list").prev(".js-attribute-btn").removeClass("on").attr("title",s),function(t){t=$(t);var a,s=$.trim(t.find(".js-size-value").text()),i=$.trim(t.find(".js-color-value").text()),o=t.data("attribute"),e=t.data("goodsimg"),r=t.data("price"),n=t.data("url"),l=t.data("sn");1<$.trim(i).split(" ").length&&(i=i.split(" ").join("_"));1<$.trim(s).split(" ").length&&(s=s.split(" ").join("_"));s&&i&&(a=o[$.trim(i)+"/"+$.trim(s)]);t.find(".js-attribute-img").attr("src",e[a]),t.find(">a").attr("href",n[a]),t.find(".js-shop-price").text(r[a]),t.find(".js-shop-price").attr("data-orgp",r[a]),t.find(".js-shop-price").attr("data-bz",r[a]);var d=l[a];t.attr("data-goods",d),t.attr("data-goodsid",a);for(var p=t.closest(".goods-list").find("li"),c=[],u=0;u<p.length;u++){var b=p[u];c.push($(b).data("goods"))}0==N&&window.GEShopSiteCommon&&window.GEShopSiteCommon.renderCurrency_v2();var h=t.data("stockobj"),f=t.data("isshow");if(h[a]){var g=h[a].split("_");0==g[0]||0==g[1]||0==f?(t.find(".soldout").show(),t.parents(".combo-wrap").find(".cart-btn-wrap").addClass("unclickable")):(t.find(".soldout").hide(),t.parents(".combo-wrap").find(".cart-btn-wrap").removeClass("unclickable"))}$(".geshop-U000192-default").each(function(){$(this).find(".goods-list li").each(function(){"block"==$(this).find(".soldout").css("display")&&$(this).parents(".combo-wrap").find(".cart-btn-wrap").addClass("unclickable")})}),function(t,a){var s={lang:"undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en",platform:GESHOP_PLATFORM,skus:t.join(",")},i=GESHOP_INTERFACE.goods_comboprice.url;window.GEShopCommonFn_Vue.$jsonp(i,s).done(function(t){"0"==t.code&&($(a).parents(".combo-wrap").find(".group-price").text(t.data),$(a).parents(".combo-wrap").find(".group-price").attr("data-orgp",t.data),$(a).parents(".combo-wrap").find(".group-price").attr("data-b",t.data),0==N&&window.GEShopSiteCommon&&window.GEShopSiteCommon.renderCurrency_v2())})}(c,t)}(a.closest("li")),t.preventDefault()}),$("body").on("click",".checknow-link",function(t){"rg-app"==GESHOP_SITECODE?window.location.href="rosegal://action?actiontype=11&name=wishList&source=deeplink":"rg-wap"==GESHOP_SITECODE&&(window.location.href=DOMAIN_CART+"/m-flow-a-cart.htm")}),$("body").on("click",".ico-close",function(t){layer.closeAll()}),$("body").on("click",".js-add-cart",function(t){if(!$(this).hasClass("unclickable")){for(var a=$(this).parents(".combo-wrap").find(".goods-list li"),s=$(this).parents(".combo-wrap").find("input[name=cart-num]"),i=[],o=[],e=0;e<a.length;e++){var r=a[e],n=$(r).attr("data-goods");i.push(n);var l,d=JSON.parse($(r).attr("data-sn"));for(var p in d){if(d.hasOwnProperty(p))(r=d[p])===n&&(l=p)}o.push(l)}if("zf-app"==GESHOP_SITECODE)window.location.href="zaful://action?actiontype=16&url="+o.join(",")+"&source=deepLink",setTimeout(function(){h()},1e3);else if("rg-app"==GESHOP_SITECODE){var c=new Array(o.length+1).join("1").split("").join(",");window.location="webAction://addToCart?goodsId="+o.join(",")+"&num="+c+"&callback=addsucess(a)&goods_type=&p_source=recruit2.0",setTimeout(function(){h()},1e3)}else{var u={lang:"undefined"!=typeof GESHOP_LANG?GESHOP_LANG:"en",platform:GESHOP_PLATFORM,skus:i.join(",")},b=GESHOP_INTERFACE.goods_comboaddcart.url;window.GEShopCommonFn_Vue.$jsonp(b,u).done(function(t){"0"==t.code&&h(s)})}}}),1!=N?$LAB.script(GESHOP_STATIC+"/resources/javascripts/library/in-view.js").wait(function(){$(".geshop-U000192-default").each(function(t,a){inView(".geshop-U000192-default-"+$(a).data("id")).once("enter",function(t){s(t)})})}):s($(".geshop-U000192-default"))});